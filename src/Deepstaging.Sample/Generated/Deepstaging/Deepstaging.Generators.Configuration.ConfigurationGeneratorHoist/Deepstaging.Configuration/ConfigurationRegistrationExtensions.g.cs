// <auto-generated>
// This file was generated by Deepstaging source generators.
// Changes to this file may be lost when the code is regenerated.
// </auto-generated>

#nullable enable

using Deepstaging.Configuration.Yaml;
using Deepstaging.Configuration;
using System.IO;
using Microsoft.Extensions.Hosting;
using Microsoft.Extensions.DependencyInjection;

namespace Deepstaging.Configuration;

internal static class ConfigurationRegistrationExtensions
{
    public static TBuilder RegisterConfigurations<TBuilder>(this TBuilder builder) where TBuilder : IHostApplicationBuilder
    {        
        builder.Configuration
            .AddYamlFile($"appsettings.{builder.Environment.EnvironmentName}.yaml", optional: true, reloadOnChange: true)
            .AddYamlFile("appsettings.yaml", optional: true, reloadOnChange: true);
            
        builder.Services.Configure<Deepstaging.Sample.HttpClients.ServiceClientConfig>(
            config: builder.Configuration.GetSection("Deepstaging:Sample:HttpClients:ServiceClientConfig")
        );
        
        return builder;
    }
}