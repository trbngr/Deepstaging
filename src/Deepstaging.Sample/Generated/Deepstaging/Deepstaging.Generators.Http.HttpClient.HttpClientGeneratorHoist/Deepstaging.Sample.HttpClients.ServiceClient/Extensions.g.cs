// <auto-generated>
// This file was generated by Deepstaging source generators.
// Changes to this file may be lost when the code is regenerated.
// </auto-generated>

#nullable enable

using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Hosting;

namespace Deepstaging.Sample.HttpClients;

public static class ServiceClientExtensions
{
    public static TBuilder AddServiceClient<TBuilder>(this TBuilder builder,
        Action<global::System.Net.Http.HttpClient, global::Deepstaging.Sample.HttpClients.ServiceClientConfig> configure)
        where TBuilder : IHostApplicationBuilder
    {
        
        builder.Services.AddHttpClient<IServiceClient, ServiceClient>(client =>
        {
            var scope = builder.Services.BuildServiceProvider().CreateScope();
            var configuration = scope.ServiceProvider.GetRequiredService<Microsoft.Extensions.Options.IOptions<global::Deepstaging.Sample.HttpClients.ServiceClientConfig>>().Value;
            configure(client, configuration);
        });
        return builder;
    }
}